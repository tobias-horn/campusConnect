<!-- templates/canteen.html -->

<div class="wrapper-canteen">
    <h2>{{ canteen_name }}</h2> <!-- Use the dynamic canteen_name -->
    {% if canteen_data %}   
        {% if canteen_data.dishes %}
            {% set date_parts = canteen_data.date.split('-') %}
            <em>Men√º am {{ date_parts[2] }}.{{ date_parts[1] }}.{{ date_parts[0] }}</em><br><br> <!-- Reformatted date -->
            <div class="dish-container">
                {% for dish in canteen_data.dishes %}
                    {% if dish.dish_type not in ["S√º√üspeise", "Tagessupe, Brot, Obst", "Tagessuppe", "Brot", "Obst", "Dessert (Glas)"] %}
                        <div class="dish-box">
                            <span>
                                {% if dish.dish_type == "Pizza" %}üçï
                                {% elif dish.dish_type == "Pasta" %}üçù
                                {% elif dish.dish_type == "Grill" %}üçñ
                                {% elif dish.dish_type == "Studitopf" %}ü•ò
                                {% elif dish.dish_type == "Fisch" %}üêü
                                {% elif dish.dish_type == "Wok" %}ü•°
                                {% elif dish.dish_type == "Fleisch" %}ü•©
                                {% elif dish.dish_type == "Vegetarisch/fleischlos" %}üå±
                                {% else %}{{ dish.dish_type }}
                                {% endif %}
                                
                            </span>
                            <strong class="dish-title">{{ dish.name }}</strong><br>
    
                            <span class="price-line">
                                <em>Preis:</em>
                                {% set student_price = dish.prices.get('students', {}) %}
                                {% if student_price.base_price %}
                                    ‚Ç¨{{ '%.2f' | format(student_price.base_price) }}
                                {% elif student_price.price_per_unit %}
                                    ‚Ç¨{{ '%.2f' | format(student_price.price_per_unit) }} per {{ student_price.unit }}
                                {% else %}
                                    Not Available
                                {% endif %}
                            </span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% else %}
            <p>No dishes available for today.</p>
        {% endif %}
    {% else %}
        <h2>{{ error }}</h2>
    {% endif %}
</div>